@model Elearning_Test.Models.DashboardViewModel

@{
    ViewData["Title"] = "Tableau de Bord";
    Layout = "_AdminLayout"; // Utilisez votre layout personnalisé
}

<div class="container-fluid mt-4">
    <h1 class="mb-4">Tableau de Bord</h1>

    <!-- Cartes de statistiques principales -->
    <div class="row">
        <!-- Étudiants inscrits -->
        <div class="col-md-3">
            <div class="card bg-primary text-white mb-4">
                <div class="card-body">
                    <h5 class="card-title">Étudiants Inscrits</h5>
                    <p class="card-text fs-4">@Model.TotalEtudiants</p>
                </div>
            </div>
        </div>

        <!-- Professeurs inscrits -->
        <div class="col-md-3">
            <div class="card bg-success text-white mb-4">
                <div class="card-body">
                    <h5 class="card-title">Professeurs Inscrits</h5>
                    <p class="card-text fs-4">@Model.TotalProfesseurs</p>
                </div>
            </div>
        </div>

        <!-- Cours disponibles -->
        <div class="col-md-3">
            <div class="card bg-info text-white mb-4">
                <div class="card-body">
                    <h5 class="card-title">Cours Disponibles</h5>
                    <p class="card-text fs-4">@Model.TotalCours</p>
                </div>
            </div>
        </div>

        <!-- Certificats délivrés -->
        <div class="col-md-3">
            <div class="card bg-warning text-white mb-4">
                <div class="card-body">
                    <h5 class="card-title">Certificats Délivrés</h5>
                    <p class="card-text fs-4">@Model.TotalCertificats</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Deuxième ligne de statistiques -->
    <div class="row">
        <!-- Cours actifs -->
        <div class="col-md-3">
            <div class="card bg-secondary text-white mb-4">
                <div class="card-body">
                    <h5 class="card-title">Cours Actifs</h5>
                    <p class="card-text fs-4">@Model.CoursActifs</p>
                </div>
            </div>
        </div>

        <!-- Cours terminés -->
        <div class="col-md-3">
            <div class="card bg-danger text-white mb-4">
                <div class="card-body">
                    <h5 class="card-title">Cours Terminés</h5>
                    <p class="card-text fs-4">@Model.CoursTermines</p>
                </div>
            </div>
        </div>

        <!-- Étudiants actifs -->
        <div class="col-md-3">
            <div class="card bg-dark text-white mb-4">
                <div class="card-body">
                    <h5 class="card-title">Étudiants Actifs</h5>
                    <p class="card-text fs-4">@Model.EtudiantsActifs</p>
                </div>
            </div>
        </div>

        <!-- Professeurs actifs -->
        <div class="col-md-3">
            <div class="card bg-light mb-4">
                <div class="card-body">
                    <h5 class="card-title">Professeurs Actifs</h5>
                    <p class="card-text fs-4">@Model.ProfesseursActifs</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Graphiques -->
    <div class="row">
        <!-- Graphique des inscriptions par mois -->
        <div class="col-md-6">
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="card-title">Inscriptions par Mois</h5>
                </div>
                <div class="card-body">
                    <canvas id="inscriptionsChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Graphique des cours les plus populaires -->
        <div class="col-md-6">
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="card-title">Cours les Plus Populaires</h5>
                </div>
                <div class="card-body">
                    <canvas id="coursPopulairesChart"></canvas>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Graphique des inscriptions par mois
        var ctx1 = document.getElementById('inscriptionsChart').getContext('2d');
        var inscriptionsChart = new Chart(ctx1, {
            type: 'line',
            data: {
                labels: @Html.Raw(Json.Serialize(Model.InscriptionsParMois.Keys)), // Mois
                datasets: [{
                    label: 'Inscriptions',
                    data: @Html.Raw(Json.Serialize(Model.InscriptionsParMois.Values)), // Nombre d'inscriptions
                    backgroundColor: 'rgba(75, 192, 192, 0.2)',
                    borderColor: 'rgba(75, 192, 192, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });

        // Graphique des cours les plus populaires
        var ctx2 = document.getElementById('coursPopulairesChart').getContext('2d');
        var coursPopulairesChart = new Chart(ctx2, {
            type: 'bar',
            data: {
                labels: @Html.Raw(Json.Serialize(Model.CoursPopulaires.Keys)), // Noms des cours
                datasets: [{
                    label: 'Nombre d\'étudiants',
                    data: @Html.Raw(Json.Serialize(Model.CoursPopulaires.Values)), // Nombre d'étudiants
                    backgroundColor: 'rgba(153, 102, 255, 0.2)',
                    borderColor: 'rgba(153, 102, 255, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    </script>
}